<%# This changed between spotlight versions. TODO: Will have to dig into if this is still working. How it was changed and how to change it it have same effects. %>

<% cache_unless current_user, [current_exhibit, @page] do %>
<ol class="nav sidenav flex-column">
  <% InMenuBehavior::Helper.menu_filter(@exhibit.feature_pages).each do |feature_section| %>
    <li class="<%= 'active' if current_page? [spotlight, @exhibit, feature_section] %>">
      <h2 class="h6"><%= link_to_unless_current feature_section.title, [spotlight, @exhibit, feature_section] %></h2>
      <% child_pages = feature_section.child_pages.published %>

      <% if child_pages.any? %>
        <ol class="subsection">
          <% child_pages.each do |page| %>
            <li class="<%= 'active' if current_page? [spotlight, @exhibit, page] %>"><%= link_to_unless_current page.title, [spotlight, @exhibit, page] %></li>
          <% end %>
        </ol>
      <% end %>
    </li>
  <% end %>
</ol>
<% end %>
